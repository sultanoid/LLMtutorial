[Music] foreign [Music] Ty with WhatsApp so in this tutorial what I will do exactly let me tell you so I will show you guys how to create a WhatsApp chatbot which will have all capabilities all all a power of chat GPT and you can access it from your WhatsApp so basically it is going to be a WhatsApp chatbot but the bot will actually have all the capabilities of to um chat GPT so you know uh like it's kind of a wrapper on top of chat GPT and and it will be accessible from your WhatsApp right so for for for development purpose there are couple of prerequisite we'll be going to actually discuss now so before I actually discuss this slide I'll be just going to tell you something how the integration will happen so I will be going to code the WhatsApp chat box using twilo WhatsApp API and the entire the bot API sorry the bot will be developed using python flask and we'll be going to use the open API uh module from python so interact with the chat GPT like from the back end right so there are multiple things but uh I'll be going to explain each and everything slowly so these are the prerequisite you require python you require vs code you required value account the NZ Rock open API and everything right so python definitely required for uh our environment setup then we required ID for coding twilio account we required for uh interacting with the WhatsApp right so it is a WhatsApp API service provider NZ rock is actually going to help you to host your local endpoint into a public interface or kind of port forwarding your local like HTTP Services into the public URL okay and then open API a open AI API means we'll be going to create an API he that I already did in the last tutorial but again I'll be just going to give you an walkthrough okay and then uh we have to actually set up everything do I know open API and flux so so this is a pretty quick side and steps so first steps is to allow account setup and then I will be going to write and flux endpoint to interact with the twilo WhatsApp okay so we'll do this two steps first okay right so first thing first uh first value account setup so basically you have to go to this link and you have to create an account okay and once you create this account you have to go to develop in that uh from your dashboard and after that you have to create a click on the messaging and after that you have to click send a message send a WhatsApp message okay and here we will have to do something else but just forget about this links and all I'll be going to explain you what is this link okay so for the timing I'm just removing this thing okay and for the time name I'm also removing this thing okay and this and this okay now first we set up your to Value account how to set up your 2la account like that I cannot show you right now but you can set up your account from this thing you have to just do a simple registration from this link console.12.com then after that you have to register with an account and after that you have to verify with your email ID or phone number and after that boom you are ready and one more thing I believe to ILO is actually some limitation that you have to recharge for five dollar or seven dollar or ten dollar then probably a couple of features will be unlocked so basically I'm just doing this thing for uh teaching um purpose and also some sort of like freelance work so basically I created a paid account like I'm paying let's say a couple of uh maybe ten dollar monthly and I believe if you guys want to actually do the same you can do it or else I believe in the free version also it will work but I I didn't have much knowledge about the billing part okay so let's start with the coding okay so first thing we have to actually install couple of modules okay so let me install all those things I believe everything is installed required flask we required open AI right and we required twilio these are the module required so I believe okay so it will be installed okay so 12 account is set up and okay everything is set up so after 12 accounts setup write a flux endpoint to interact with WhatsApp okay so for that we'll be going to write the our first coding to interact with WhatsApp okay so let's do this thing okay so this is going to be a really interesting from uh this point okay so first thing from flask import so flask is a module from that will be going to import flask and we'll be going to import request okay that is something and then we'll be going to import to ILO Okay so from to a low dot um ml dot messaging response import I believe in Port message response and then the last thing import open AI import open AI and Json I believe uh these are the things are required for our purpose okay so now we'll be going to set up the API key okay let me create a variable API underscore key and I'll be going to use the API key from my previous tutorial I believe you guys already know what we did in the previous tutorials we'll be going to use the same key so how to set up the key so if you go to this link right and here actually hmm let me open it yeah yes so this is the link from there we'll be able to get the API key so I believe this is my API key okay so if you forgot you can create another API key test to create API Secret copy and then we'll be going to write the API key okay that's it okay my API key is created right now what will happen but just remember first you have to go to this platform.openai you have to sign up and after signing up you have to create the keys this is for accessing chat GPT from the back end okay because whenever you are doing some sort of AI related AI driven application so you cannot actually access charge GPT from your interface you should have something where actually you can access the entire chat GPT feature from the backend okay so next thing uh what we'll be going to do now so we'll be going to create the establishment so open API dot API key equals to API key so this is going to set up the authentication so what we'll do we'll just going to execute this part if everything is working fine this is not going to give me any error okay so not giving any error so everything is fine so suppose I change this password let's say and let's see what is going to happen still it is not giving me the error so they claim it that in this position it is actually doing some authentication but it is just setting up the key it is not doing any authentication okay right so this is just setting up the key okay just remember okay so now I will be going to actually create a flask application right so maybe I can just write app equals to flask and there I'll be just going to write again right something like and then we'll be going to create a route Okay so app dot route so we'll be going to create an index route first and in the at the index route there will be only get operation right so in the gate operation we'll be going to do something like get post okay I'm just giving everything so then def Index this is the index route and then we'll be going to write return hello from flask so this is plain flask we are still not using anything from our WhatsApp thing this plain Valley vanilla python it's last okay so I'm just setting up everything okay so and the last thing we have to actually uh run this thing so if underscore underscore name underscore underscore equals to equals to underscore underscore main underscore underscore then tap dot run and then we're going to mention the port so maybe I can just mention port 5001 so what will happen this will run the flux API is running so we'll be going to this index page so this will give me this as output in my browser okay so let me do it localhost okay then five zero zero one say hello from flask can also it is giving me 200 so my slacks and points are working normally going to actually create the next endpoint to work with um our API so second thing is actually uh as per this thing so flag configure the n0 can update that value so now this API endpoint is actually not accessible from uh internet right so what exactly will happen let me now uh explain you guys when somebody actually sent a message to Whatsapp uh this twilo API this message is actually going to hit this endpoint the end point which I wrote here right and that end point whatever code is written that will actually do is work so so so to actually achieve this thing I need to give you our API URL in the public publicly accessible URL format for that I actually installed something called NJ rock you can install NJ Rock after that even actually opened like this okay so NJ Rock then HTTP Port HTTP actually my protocol and then 5001 so basically my API is actually accessible from internet with this URL okay so what will happen if you hit this thing here okay so this is site it's also going to give me the same thing and next response is coming so what will happen I will go here and I will write this thing and after that I'll be going to write that my end point should have something maybe I can write my input should have sms okay save it right main point is saved now I'll be going to write the code so basically app dot route Okay so route name is actually SMS right that is what I have written and it will be having get and post method okay and then Def response like this okay okay so now we'll be going to actually write my number first check whether my number is accessible or not okay so number will come from where number will come from request Dot form okay so this is going to give you what this is going to give you the message whatever you send okay so if I do this thing and after that I can just simply write print number and after that you can just write return in return I can just simply write number okay or maybe body maybe message or maybe body message body okay let's say okay so now what we'll do I'll be going to actually interact with WhatsApp and this is going to give me my the entire message body in the chat okay so let me kill this terminal and run this terminal this will work okay okay fine I'll be able to access this thing from here and my this thing is actually running here so whenever I request something it will come here and it will come here just to validate this thing it is going to give me this and this is the second response is also coming okay okay and this is also a response coming right again if I press this page yeah second response one more response one more response it is something different okay now I want to actually access my WhatsApp means I'll be going to hit this endpoint but to hit this end point I have written that whenever uh methods comes like just hold on messaging 12 is down or something I don't know at this moment so basically oh it is asking me to log okay uh okay so right now I have actually removed my one account from the sandbox and right now it is going to show you only one account see okay so if I go to sandbox settings and maybe here you see right now only one account is there so what we'll do now I will do now I will be going to actually send a message from my phone number to this bot and after that this bot is going to tell me that you are not authorized to use the bot and after that I'll be going to send this message and then my number will be authorized to actually use the sandbox and after that we'll be going to start working our actual talk so I'll be going to explain you everything okay so let's actually start the next part okay so now this is a two by law if you see the same number here yeah same number so let me actually send a message to this bot so this is saying that this number is not this thing so we have to actually give the sandbox name so it is actually join evening slow now it is connected to the sandbox okay right now basically whatever will be going to send it this bot that will actually going to hit this this URL okay it says message received okay right so ah Maybe here if you see here so whatever I send this message to this board this URL will be actually going to receive that message I mean this URL means it is actually going to call this URL as an API call and that API is actually in turn having this logic written so I will be going to get the body okay so let's see how this work so before doing that I need to move my screen a little bit this side because I don't want to reveal my contact details okay so let me okay okay so let's do let's see I have written High okay so nothing actually happens okay and check why nothing happens Okay so hmm yeah let me copy this thing it is actually giving me something written oh no this is not giving me anything okay so I need to actually run the terminal again one more time okay so kill the terminal and run it okay now what will happen I'll be going to call the API again with a high [Music] um it is not hit the API why this is not hitting the API that is something okay um let me check is 5001 let me check this is also hitting this API with localhost 5001 and I have given this thing slash SMS okay so there is a mess response return method because to get post everything is here respond what equals to request dot form print body okay so let me actually hit this URL normally okay so this URL so basically let me call the URL and try to hit okay yeah so basically it is calling but this is not hitting this endpoint so let me check why this is not hitting this end point so maybe the URL is wrong or something let me check so basically the URL is actually something [Music] yeah so URL is wrong that is why it's not working so this is the URL I was using the wrong URL so after n0 we have to change this URL okay and then save okay fine so now what we'll do we'll be going to actually call the end point again okay so for that let me move it a little bit this side and now let's send a message yeah now you see I am getting this thing so basically your number is actually your message is actually part of this body and there is something called from yeah from if actually here so basically dot get and then you'll be going to write body and if you want to generate your own number so basically like this and this is going to give you your own number and I'll be going to generate a response okay so what I'll do I'll just try to create MSG is equals to messaging response okay response equals to MSG Dot message and here I'll be going to just append this thing your number is num and you wrote body so what will happen this is going to reply with this thing so let's scale terminal and let's execute okay I'm just doing everything on the live environment okay so now I'll be going to do a high okay so I got a high but in return I'm not getting any response that is something strange yeah so why I am not getting any response let me check this thing ideally you should get a response right let me check um code is fine there is no problem with the code hmm I'm just just checking message Dot message is messaging response oh I'm gonna mistake Maybe let's see you need to return this thing so that will actually going to it will get the response from this thing okay so we need to actually pass this thing sorry I forget to actually return the message so the return of this thing is actually going to be triggered as an API response and that API response will be available in the WhatsApp you can miss that part okay so basically let's write hi okay so your number is WhatsApp uh this thing and New Road hi so basically when the number is coming it has so dot okay so maybe the entire thing then num equals to num dot replace okay terminal execute and then I wrote a hi hello let me write hello okay I wrote a hello okay fine everything is fine now basically as this is a chat GPT I want to use this chat GPT so this hello will be actually sent to chat GPT prompt and I want to actually display the response from chat GPT not this one okay so for that uh what I already I have actually included so let me actually write uh two or three lines of code that is actually uh going to do our next task so basically ah what we'll do we'll be going to create a something called a reply here okay maybe here so maybe reply is going to be okay so reply is going to be open AI dot chat completion Dot nothing .create right so now what will happen will be going to set up our model and other stuff so basically the model will be chat okay I don't know why then this thing and after that we'll be going to actually use something called messages equals to this okay and this then first thing roll yeah definitely role will be user and the content with okay yes so now after that the reply will actually going to generate the reply okay so let me generate the reply close this terminal let's close Okay and redone this thing okay now let's go to the bot okay let's write hi I'll be going to actually use this thing inside a variable so maybe I can just write response from GPT right and this right and then what will happen means this is the response from bot okay so you can just simply write means GPT and then yeah response from GPT right yeah just due to my uh kind of um what can I say like my computer is actually running very slow so because of that maybe that error came but right now uh I can see the error so let me actually try and test the same thing from my WhatsApp so maybe if I write hi it is going to give me a response and if I show it from here see I just wrote Hi and the bot actually gave an answer hello okay so what is your location your name okay so you can see it is giving some answer right do you know python if it is giving the answer as well right so this is super cool so maybe let's ask something tricky okay generate a code in in Python to write a JavaScript um I ask actually to do something tricky let's see what it is giving us okay so it is it is giving us something okay okay huh this is cool so this is actually okay so this is taking this entire thing as a script and after that this okay pretty cool now let's something different okay uh why okay maybe right and foreign let's see is it because there are some limitation on the API side like this is two value API and this is hosted on AWS so there are some limitations just say I want to understand like exactly is it able to generate something or we are getting a timeout okay so I believe this is now giving us the timeout right because it's already generated the response so if your like character count is actually more than the 12 apis character count then you won't be actually able to get something okay so that is something let's ask something different right 10 lines about numpy okay let's see I asked uh I asked actually to generate 10 lines yeah now it is generated okay uh yeah it's another 10 lines see okay so let's do something different uh right a code to convert Json into pandas data frame okay so what it is okay I don't know what happened yes yeah it's generating it's super cool right so I'm actually going to conclude the video over here I believe you guys uh enjoyed this thorough and detailed tutorial okay and I'm expecting to actually produce similar content in upcoming days and you guys can actually um expect uh some exciting um uh not only exciting some valuable uh like uh videos as well in the coming month right so I I have already I have actually planned everything for the upcoming months but um I'm not getting the right time to upload but today for example is Sunday so I just got some time so I'm uploading this video okay uh so let me just conclude this video here but before I actually hang up for today I just want to add couple of lines like uh if you uh guys actually saw my channel uh subscriber count is actually very less and most of my audiences are actually then I'm not subscribing to my channel but because of that actually I'm not growing as expected so it's a humble request so that uh YouTube algorithm can actually promote my videos at the top so guys whenever actually watch my videos just try to subscribe to our Channel hit the Bell notification it is also help you to actually to get all the notification whenever I upload some videos in the future and also try to share our content with your family member friends whoever you think mud might get some benefit out of our video and last but not least try to put some valuable feedback good or bad doesn't matter it must be honest so that actually you can work on our content in a more productive way you can come up with some uh like nice upgraded like quality content and also if you like something in our video just try to put some comment and let us know and let everyone know so that in indirectly it will actually motivate us to come up with some more uh quality content for the future okay so this is just a request okay so that's it guys uh that's it for today we'll see you in the next video till then take goodbye and have a nice day [Music]